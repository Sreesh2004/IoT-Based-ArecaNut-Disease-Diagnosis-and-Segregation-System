# COPY AND PASTE THIS ENTIRE COMMAND IN YOUR RASPBERRY PI TERMINAL
# ================================================================
# This single command will install everything and launch the detection system

python3 -c "
import subprocess, sys, os, time

# Quick setup function
def setup_and_run():
    print('🚀 ARECA DETECTION - ONE COMMAND SETUP & LAUNCH')
    print('=' * 50)
    
    # Install packages
    packages = ['ultralytics', 'opencv-python', 'pillow', 'RPi.GPIO']
    for pkg in packages:
        print(f'📦 Installing {pkg}...')
        subprocess.run([sys.executable, '-m', 'pip', 'install', pkg, '-q'], check=False)
    
    # Test camera
    print('📹 Testing camera...')
    try:
        import cv2
        for i in [0, 1, 2]:
            cap = cv2.VideoCapture(i)
            if cap.isOpened():
                ret, frame = cap.read()
                if ret: 
                    print(f'✅ Camera working on index {i}')
                    cap.release()
                    break
                cap.release()
        else:
            print('⚠️ Camera test inconclusive')
    except: pass
    
    # Test GPIO
    print('🔌 Testing GPIO...')
    try:
        import RPi.GPIO as GPIO
        GPIO.setmode(GPIO.BCM)
        GPIO.cleanup()
        print('✅ GPIO working')
    except: print('⚠️ GPIO test failed')
    
    print('\\n🎯 LAUNCHING DETECTION SYSTEM...')
    print('🔴 Press CTRL+C to stop')
    print('🟢 Point camera at areca nuts')  
    print('⚡ Relays trigger on SEVERE detection\\n')
    
    # Launch main script
    try:
        exec(open('areca_detection_relay.py').read())
    except FileNotFoundError:
        print('❌ areca_detection_relay.py not found!')
        print('💡 Make sure you are in the rpi_deployment directory')
    except KeyboardInterrupt:
        print('\\n🛑 Stopped by user')
    except Exception as e:
        print(f'❌ Error: {e}')

setup_and_run()
"