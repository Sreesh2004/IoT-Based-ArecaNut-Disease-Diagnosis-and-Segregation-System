# COPY AND PASTE THIS ENTIRE COMMAND IN YOUR RASPBERRY PI TERMINAL
# ================================================================
# This single command will install everything and launch the detection system

python3 -c "
import subprocess, sys, os, time

# Quick setup function
def setup_and_run():
    print('ğŸš€ ARECA DETECTION - ONE COMMAND SETUP & LAUNCH')
    print('=' * 50)
    
    # Install packages
    packages = ['ultralytics', 'opencv-python', 'pillow', 'RPi.GPIO']
    for pkg in packages:
        print(f'ğŸ“¦ Installing {pkg}...')
        subprocess.run([sys.executable, '-m', 'pip', 'install', pkg, '-q'], check=False)
    
    # Test camera
    print('ğŸ“¹ Testing camera...')
    try:
        import cv2
        for i in [0, 1, 2]:
            cap = cv2.VideoCapture(i)
            if cap.isOpened():
                ret, frame = cap.read()
                if ret: 
                    print(f'âœ… Camera working on index {i}')
                    cap.release()
                    break
                cap.release()
        else:
            print('âš ï¸ Camera test inconclusive')
    except: pass
    
    # Test GPIO
    print('ğŸ”Œ Testing GPIO...')
    try:
        import RPi.GPIO as GPIO
        GPIO.setmode(GPIO.BCM)
        GPIO.cleanup()
        print('âœ… GPIO working')
    except: print('âš ï¸ GPIO test failed')
    
    print('\\nğŸ¯ LAUNCHING DETECTION SYSTEM...')
    print('ğŸ”´ Press CTRL+C to stop')
    print('ğŸŸ¢ Point camera at areca nuts')  
    print('âš¡ Relays trigger on SEVERE detection\\n')
    
    # Launch main script
    try:
        exec(open('areca_detection_relay.py').read())
    except FileNotFoundError:
        print('âŒ areca_detection_relay.py not found!')
        print('ğŸ’¡ Make sure you are in the rpi_deployment directory')
    except KeyboardInterrupt:
        print('\\nğŸ›‘ Stopped by user')
    except Exception as e:
        print(f'âŒ Error: {e}')

setup_and_run()
"